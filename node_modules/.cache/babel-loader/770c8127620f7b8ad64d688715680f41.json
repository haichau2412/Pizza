{"ast":null,"code":"import config from '../config/environments';\nconst {\n  API_HOST\n} = config;\n\nconst handleResponse = async response => {\n  try {\n    const result = await response.json();\n\n    if (!response.ok) {\n      if (response.status === 401) {// auto logout if 401 response returned from api\n      }\n\n      const error = result.errorMessage || response.statusText;\n      return Promise.reject(error);\n    }\n\n    return result;\n  } catch (error) {\n    return {\n      error\n    };\n  }\n};\n\nexport const getProducts = async () => {\n  const response = await fetch(`${API_HOST}/products`);\n  const data = await handleResponse(response);\n  const products = data.reduce((result, product, index) => {\n    const {\n      category,\n      photo,\n      name,\n      description,\n      price,\n      id\n    } = product;\n\n    if (!result[category]) {\n      result[category] = [{\n        photo,\n        name,\n        description,\n        price\n      }];\n    } else {\n      result[product.category].push({\n        id,\n        photo,\n        name,\n        description,\n        price\n      });\n    }\n\n    return result;\n  }, {});\n  return products;\n};","map":{"version":3,"sources":["/home/chau1246/Documents/pizza/src/App/service/ProductServices.js"],"names":["config","API_HOST","handleResponse","response","result","json","ok","status","error","errorMessage","statusText","Promise","reject","getProducts","fetch","data","products","reduce","product","index","category","photo","name","description","price","id","push"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,wBAAnB;AAEA,MAAM;AAAEC,EAAAA;AAAF,IAAeD,MAArB;;AAEA,MAAME,cAAc,GAAG,MAAOC,QAAP,IAAoB;AAEvC,MAAI;AACA,UAAMC,MAAM,GAAG,MAAMD,QAAQ,CAACE,IAAT,EAArB;;AACA,QAAI,CAACF,QAAQ,CAACG,EAAd,EAAkB;AACd,UAAIH,QAAQ,CAACI,MAAT,KAAoB,GAAxB,EAA6B,CACzB;AACH;;AACD,YAAMC,KAAK,GAAIJ,MAAM,CAACK,YAAR,IAAyBN,QAAQ,CAACO,UAAhD;AACA,aAAOC,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACH;;AACD,WAAOJ,MAAP;AACH,GAVD,CAWA,OAAOI,KAAP,EAAc;AACV,WAAO;AAAEA,MAAAA;AAAF,KAAP;AACH;AAEJ,CAjBD;;AAmBA,OAAO,MAAMK,WAAW,GAAG,YAAY;AACnC,QAAMV,QAAQ,GAAG,MAAMW,KAAK,CAAE,GAAEb,QAAS,WAAb,CAA5B;AACA,QAAMc,IAAI,GAAG,MAAMb,cAAc,CAACC,QAAD,CAAjC;AAEA,QAAMa,QAAQ,GAAGD,IAAI,CAACE,MAAL,CAAY,CAACb,MAAD,EAASc,OAAT,EAAkBC,KAAlB,KAA4B;AACrD,UAAM;AAAEC,MAAAA,QAAF;AAAYC,MAAAA,KAAZ;AAAmBC,MAAAA,IAAnB;AAAyBC,MAAAA,WAAzB;AAAsCC,MAAAA,KAAtC;AAA6CC,MAAAA;AAA7C,QAAoDP,OAA1D;;AACA,QAAI,CAACd,MAAM,CAACgB,QAAD,CAAX,EAAuB;AACnBhB,MAAAA,MAAM,CAACgB,QAAD,CAAN,GAAmB,CAAC;AAAEC,QAAAA,KAAF;AAASC,QAAAA,IAAT;AAAeC,QAAAA,WAAf;AAA4BC,QAAAA;AAA5B,OAAD,CAAnB;AACH,KAFD,MAEO;AACHpB,MAAAA,MAAM,CAACc,OAAO,CAACE,QAAT,CAAN,CAAyBM,IAAzB,CAA8B;AAAED,QAAAA,EAAF;AAAMJ,QAAAA,KAAN;AAAaC,QAAAA,IAAb;AAAmBC,QAAAA,WAAnB;AAAgCC,QAAAA;AAAhC,OAA9B;AACH;;AACD,WAAOpB,MAAP;AACH,GARgB,EAQd,EARc,CAAjB;AAUA,SAAOY,QAAP;AACH,CAfM","sourcesContent":["import config from '../config/environments';\n\nconst { API_HOST } = config;\n\nconst handleResponse = async (response) => {\n\n    try {\n        const result = await response.json();\n        if (!response.ok) {\n            if (response.status === 401) {\n                // auto logout if 401 response returned from api\n            }\n            const error = (result.errorMessage) || response.statusText;\n            return Promise.reject(error);\n        }\n        return result;\n    }\n    catch (error) {\n        return { error };\n    }\n\n}\n\nexport const getProducts = async () => {\n    const response = await fetch(`${API_HOST}/products`);\n    const data = await handleResponse(response);\n\n    const products = data.reduce((result, product, index) => {\n        const { category, photo, name, description, price, id } = product;\n        if (!result[category]) {\n            result[category] = [{ photo, name, description, price }];\n        } else {\n            result[product.category].push({ id, photo, name, description, price });\n        }\n        return result;\n    }, {})\n\n    return products;\n}"]},"metadata":{},"sourceType":"module"}